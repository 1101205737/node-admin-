webpackJsonp([5],{481:function(e,t,a){var l=a(186)(a(492),a(509),null,null);e.exports=l.exports},492:function(e,t,a){"use strict";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var n;t.default={name:"list",data:function(){return{tableData:[],cur_page:1,member_phone:"",multipleSelection:[],membership_levels:[{val:"1",txt:"普通会员"},{val:"10",txt:"金牌会员"},{val:"100",txt:"VIP会员"}],curRow:null,load:!1}},methods:(n={formatLevel:function(e,t){return 1==e.membership_level?"普通会员":10==e.membership_level?"金牌会员":100==e.membership_level?"VIP会员":"未知"},fetchList:function(){var e=this;this.load=!0,this.func.ajaxGet(this.api.memberList,function(t){e.tableData=t.data.members,e.load=!1})}},l(n,"fetchList",function(){var e=this;this.load=!0;var t={member_phone:this.member_phone,cur_page:this.cur_page};this.func.ajaxPost(this.api.memberList,t,function(t){e.tableData=t.data.members,e.load=!1})}),l(n,"handleCurrentChange",function(e){this.cur_page=e,this.fetchList()}),l(n,"search",function(){this.fetchList()}),l(n,"editMember",function(e){console.log(e),this.$router.push({path:"/member-form",query:{id:e.id}})}),l(n,"handleDelete",function(e){var t=this;this.func.ajaxPost(this.api.memberDelete,{id:e.id},function(a){if(200===a.data.code){var l=t.tableData.indexOf(e);t.tableData.splice(l,1),t.$message.success("删除成功")}})}),l(n,"changeRole",function(e){var t=this;this.func.ajaxPost(this.api.memberChangeRole,{change_role:e,id:this.curRow.id},function(e){200===e.data.code&&(t.$message.success("成功"),t.fetchList())})}),l(n,"handleSelectionChange",function(e){this.multipleSelection=e}),n),created:function(){this.fetchList()}}},509:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-list"},[a("div",{staticStyle:{"margin-bottom":"30px"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("会员管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("会员列表")])],1)],1),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"筛选手机号码"},model:{value:e.member_phone,callback:function(t){e.member_phone=t},expression:"member_phone"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("router-link",{attrs:{to:"/member-form"}},[a("el-button",{attrs:{type:"success"}},[e._v("新增会员")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_name",label:"会员名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"member_phone",label:"手机号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"membership_level",label:"等级",formatter:e.formatLevel,sortable:""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",width:"160",label:"添加日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-icon",{attrs:{name:"time"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.create_time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.changeRole}},[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.curRow=t.row}}},[e._v("\n                            变更等级"),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{slot:"dropdown"},e._l(e.membership_levels,function(l){return a("el-dropdown-item",{key:l.val,attrs:{command:l.val,disabled:t.row.membership_level==l.txt}},[e._v(e._s(l.txt)+"\n                            ")])}))],1),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.editMember(t.row)}}},[e._v("修改会员\n                    ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除\n                    ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:500},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}}});